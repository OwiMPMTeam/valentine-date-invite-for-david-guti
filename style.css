:root{
  --ink:#141414;
  --pink:#ff6fae;

  --yes:#8be9c3;
  --no:#ffb3d9;
  --primary:#b694ff;

  --paper: rgba(255,255,255,0.55);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }

body{
  margin:0;
  font-family:"Gluten", system-ui, -apple-system, Segoe UI, Roboto, Arial !important;
  font-weight:100;
  color:var(--ink);
  background:
    radial-gradient(circle at 10% 10%, rgba(255,170,214,0.35), transparent 45%),
    radial-gradient(circle at 85% 15%, rgba(178,232,255,0.35), transparent 50%),
    radial-gradient(circle at 55% 85%, rgba(200,170,255,0.30), transparent 55%),
    #fff;
  overflow:hidden;
}

/* animated noise */
.noise{
  position:fixed;
  inset:-30%;
  background-image:url("./assets/ui/noise.png");
  background-size:240px 240px;
  opacity:0.18;
  mix-blend-mode:multiply;
  pointer-events:none;
  animation: noiseFlicker .45s steps(2,end) infinite;
  z-index:0;
}
@keyframes noiseFlicker{
  0%{ transform:translate(0,0); }
  25%{ transform:translate(-1.6%,1.1%); }
  50%{ transform:translate(1.1%,-1.3%); }
  75%{ transform:translate(-1%,-.6%); }
  100%{ transform:translate(0,0); }
}

/* sparkles overlay */
.sparkles{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:9999;
  overflow:hidden;
}
.spark{
  position:absolute;
  transform:translate(-50%,-50%);
  opacity:0;
  animation: sparkleBoom 1200ms ease-out forwards, sparkleFall 9000ms ease-out forwards;
  filter: drop-shadow(0 12px 18px rgba(0,0,0,0.12));
}
.spark.s1{ font-size: 16px; }
.spark.s2{ font-size: 24px; }
.spark.s3{ font-size: 36px; }
.spark.s4{ font-size: 56px; }
.spark.s5{ font-size: 84px; }

@keyframes sparkleBoom{
  0%{ opacity:0; transform:translate(-50%,-50%) scale(.2); }
  25%{ opacity:1; transform:translate(calc(-50% + var(--bx)), calc(-50% + var(--by))) scale(1.2); }
  100%{ opacity:1; transform:translate(calc(-50% + var(--bx)), calc(-50% + var(--by))) scale(1); }
}
@keyframes sparkleFall{
  100%{
    opacity:0;
    transform: translate(calc(-50% + var(--bx) + var(--dx)), calc(-50% + var(--by) + var(--dy) + 1100px)) scale(.95) rotate(70deg);
  }
}

/* screens */
.screen{
  position:fixed;
  inset:0;
  display:none;
  padding:22px;
  z-index:1;
  overflow:auto;
}
.screen.active{
  display:flex;
  align-items:center;
  justify-content:center;
}

.wrap{
  width:min(1100px, 94vw);
  position:relative;
  z-index:2;
  text-align:center;
}

/* Titles use ExtraLight 200 */
.title{
  margin:0;
  font-weight:200;
  font-size:clamp(34px, 5vw, 64px);
  line-height:1.0;
  letter-spacing:.2px;
  animation: jitter .65s steps(2,end) infinite;
}
@keyframes jitter{
  0%{ transform:translate(0,0) rotate(-.35deg); }
  50%{ transform:translate(.8px,-.4px) rotate(.45deg); }
  100%{ transform:translate(-.5px,.6px) rotate(-.2deg); }
}

.sub{ margin:10px 0 0; font-size:18px; opacity:.85; font-weight:100; }
.tiny{ margin-top:10px; font-size:14px; opacity:.72; font-weight:100; }

.pink{ color:var(--pink); }
.val{ color: rgba(255,110,130,0.95); }

.stroke{
  text-shadow:
    2px 0 0 #fff, -2px 0 0 #fff,
    0 2px 0 #fff, 0 -2px 0 #fff,
    1.5px 1.5px 0 #fff, -1.5px 1.5px 0 #fff,
    1.5px -1.5px 0 #fff, -1.5px -1.5px 0 #fff,
    0 12px 28px rgba(0,0,0,0.10);
}

.topTitle{ margin-bottom: 12px; position:relative; z-index:10; }

/* Tilt permission gate */
.tiltGate{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(255,255,255,0.55);
  backdrop-filter: blur(6px);
  z-index:10000;
}
.tiltGate.hidden{ display:none; }
.tiltCard{
  width:min(520px, 92vw);
  background:var(--paper);
  border:2px solid rgba(0,0,0,0.10);
  border-radius:22px;
  padding:18px;
  box-shadow:0 20px 50px rgba(0,0,0,0.14);
}
.tiltTitle{ font-weight:200; font-size:28px; }
.tiltDesc{ margin-top:6px; opacity:.8; }

/* Password hint line aligned to input width */
.hintLine{
  width:min(520px, 92vw);
  margin: 12px auto 0;
  text-align:left;
  font-size:16px;
}
.hintLabel{ opacity:.75; }

/* password */
.pwRow{
  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:wrap;
  margin-top:10px;
}
.pwInput{
  width:min(520px, 92vw);
  padding:14px 14px;
  border-radius:16px;
  border:2px solid rgba(0,0,0,0.20);
  background:rgba(255,255,255,0.60);
  font-size:18px;
  outline:none;
  font-family:"Gluten", system-ui !important;
  font-weight:100;
}
.pwMsg{ margin-top:12px; font-size:18px; min-height:26px; font-weight:100; }

/* gossip near input */
.pwGossip{
  margin: 10px auto 0;
  width:min(420px, 92vw);
  min-height: 140px;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
}
.pwGossip img{
  width:100%;
  max-width:420px;
  opacity:.28;
  border-radius:18px;
  box-shadow:0 18px 40px rgba(0,0,0,0.10);
}

/* BUTTONS */
button, a{ font-family:"Gluten", system-ui !important; font-weight:100; }

.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:10px;

  font-size:22px;
  padding:14px 22px;

  background:transparent !important;
  color: var(--ink);
  border:none;
  cursor:pointer;

  border-radius: 255px 15px 225px 15px/15px 225px 15px 255px;
  box-shadow: 20px 38px 34px -26px hsla(0,0%,0%,.20);
  transition: transform .2s ease, box-shadow .25s ease;
  text-decoration:none;
  position:relative;

  animation: wobble 0.75s steps(2,end) infinite;
}

.btn:hover{ box-shadow: 2px 8px 4px -6px hsla(0,0%,0%,.30); }
.btn:active{ transform: scale(.98); }
.btn:disabled{ opacity:.35; cursor:not-allowed; }

.btn.lined.thick{
  border:7px solid currentColor;
}

.btn::before{
  content:"";
  position:absolute;
  inset:-6px;
  border-radius: 255px 15px 225px 15px/15px 225px 15px 255px;
  border:2px solid currentColor;
  opacity:0.35;
  pointer-events:none;
  transform: translate(1px, -1px) rotate(-0.2deg);
  animation: wobble 0.55s steps(2,end) infinite;
}

@keyframes wobble{
  0%{ transform: translate(0,0) rotate(-0.2deg); }
  50%{ transform: translate(.9px,-.6px) rotate(0.35deg); }
  100%{ transform: translate(-.7px,.8px) rotate(-0.15deg); }
}

/* NORMAL white stroke (less weird) */
.btnStroke{
  text-shadow:
    1px 0 0 #fff, -1px 0 0 #fff,
    0 1px 0 #fff, 0 -1px 0 #fff;
}

.yesOutline{ color: var(--yes); }
.noOutline{ color: var(--no); }
.primaryOutline{ color: var(--primary); }
.fullWidth{ width:100%; }

/* cover stage */
.stage{
  position:relative;
  width:min(1100px, 94vw);
  height:min(680px, 76vh);
  margin:0 auto;
  display:flex;
  align-items:center;
  justify-content:center;
}

.decor, .usPhoto{
  position:absolute;
  pointer-events:none;
  border:none !important;
  outline:none !important;
  box-shadow:none !important;
  opacity:.92;
  will-change: transform;
  z-index:1;
}

.decor{
  width:320px;
  height:320px;
  object-fit:cover;
  border-radius:34px;
}

.usPhoto{
  width:340px;
  height:460px;
  object-fit:cover;
  border-radius:0 !important;
  box-shadow:0 22px 48px rgba(0,0,0,0.14) !important;
  opacity:0.98;
}

.d1{ left:-18%; top:-6%; }
.d2{ right:-22%; bottom:-14%; }
.d3{ right:22%; top:-22%; }
.u1{ left:2%; bottom:-22%; }

.letterBtn{
  background:transparent !important;
  border:none !important;
  padding:0;
  cursor:pointer;
  position:relative;
  z-index:5;
  width:min(560px, 92vw);
  aspect-ratio: 4 / 3;
  display:flex;
  align-items:center;
  justify-content:center;
}

.letterImg{
  width:100%;
  height:auto;
  display:block;
  filter:
    drop-shadow( 2px 0 0 #fff)
    drop-shadow(-2px 0 0 #fff)
    drop-shadow( 0 2px 0 #fff)
    drop-shadow( 0 -2px 0 #fff)
    drop-shadow(0 18px 35px rgba(0,0,0,0.12));
}

.tap{
  position:absolute;
  bottom:-12px;
  left:50%;
  transform:translateX(-50%);
  font-size:18px;
}

/* Zoom transition class */
.stage.zooming .letterBtn{ transform: scale(1.2); transition: transform 160ms ease-out; }
.stage.zooming .decor,
.stage.zooming .usPhoto{ transform: scale(1.06) !important; transition: transform 160ms ease-out; }

/* question */
.qBg{
  position:fixed;
  inset:0;
  z-index:0;
  overflow:hidden;
}
.qBg img{
  width:100%;
  height:100%;
  object-fit:cover;
  transform:scale(1.03);
}
.qWrap{ position:relative; z-index:2; transform-origin:center top; }

.btnRow{
  display:flex;
  gap:14px;
  justify-content:center;
  align-items:stretch;
  flex-wrap:nowrap;
  margin-top:18px;
}

.rageLine{
  margin-top:12px;
  font-size:18px;
  min-height:26px;
  font-weight:100;
}

/* schedule */
.scheduleGrid{
  margin-top:16px;
  display:grid;
  grid-template-columns: 1.05fr 0.95fr;
  gap:18px;
  align-items:start;
}
@media (max-width: 900px){
  .scheduleGrid{ grid-template-columns: 1fr; }
}

.scheduleLeft{
  text-align:left;
  background: rgba(255,255,255,0.40);
  border: 2px solid rgba(0,0,0,0.10);
  border-radius: 18px;
  padding: 16px;
  backdrop-filter: blur(6px);
}
.scheduleName{
  font-size:30px;
  line-height:1.0;
  margin-bottom:8px;
  font-weight:200;
}
.scheduleDesc{
  font-size:18px;
  opacity:.78;
  margin-bottom:14px;
  font-weight:100;
}

/* POLAROIDS — spread more (less overlap) */
.polaroids{
  position:relative;
  min-height:460px;
}

.polaroid{
  position:absolute;
  width:220px;
  height:290px;
  background:#fff;
  border: 2px solid rgba(0,0,0,0.10);
  border-radius:0 !important;
  padding: 10px;
  box-shadow: 0 18px 40px rgba(0,0,0,0.12);
  will-change: transform;
}

.polaroid img{
  width:100%;
  height:100%;
  object-fit:cover;
  border-radius:0 !important;
  display:block;
}

/* spread MORE */
.p1{ left: -10px; top: 0px; }
.p2{ right:-10px; top: 26px; }
.p3{ left: 160px; bottom: 0px; }
.p4{ right:160px; bottom: 0px; }

.giftCenter{
  grid-column: 1 / -1;
  display:flex;
  justify-content:center;
  margin-top: 12px;
}

.center{ display:flex; justify-content:center; margin-top:16px; }

/* gift bouquet (keep, but bigger) */
.giftWrap{ text-align:center; }
.bouquetWrap{
  position:relative;
  width:min(820px, 92vw);
  height:min(560px, 56vh);
  margin: 12px auto 0;
}
.bouquet{
  position:absolute;
  inset:0;
}

.rose{
  position:absolute;
  transform: translate(-50%, -50%) scale(0);
  opacity:0;
  animation: rosePop 850ms ease-out forwards;
  filter: drop-shadow(0 10px 12px rgba(0,0,0,0.10));
  will-change: transform, opacity;
}

@keyframes rosePop{
  0%{ opacity:0; transform: translate(-50%, -50%) scale(0) rotate(-12deg); }
  60%{ opacity:1; transform: translate(-50%, -50%) scale(1.25) rotate(8deg); }
  100%{ opacity:1; transform: translate(-50%, -50%) scale(1.05) rotate(0deg); }
}

/* iPhone fixes */
@media (max-width: 520px){
  /* reduce “bouncy” feeling a bit on mobile */
  .btn{ animation-duration: 1.25s; }
  .btn::before{ animation-duration: 1.05s; }

  /* cover decor: smaller + spread so not stacked */
  .decor{ width:220px; height:220px; }
  .usPhoto{ width:240px; height:320px; }

  .d1{ left:-26%; top:4%; }
  .d2{ right:-30%; bottom:-4%; }
  .d3{ right:8%; top:-20%; }
  .u1{ left:-10%; bottom:-8%; }

  .stage{ height: 72vh; }

  /* QUESTION: vertical buttons on iPhone */
  .btnRow{
    flex-direction:column;
    align-items:stretch;
  }
  .btnRow .btn{
    width: min(420px, 92vw);
    margin: 0 auto;
  }
}
